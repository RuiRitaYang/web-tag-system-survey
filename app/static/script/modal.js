$(document).ready(function() {
    $('.drag').draggable({
      'appendTo': 'body',
      'helper': 'clone'
    });

    $('#dropzone-rtn').droppable({
      activeClass: 'active',
      hoverClass: 'hover',
      accept: ":not(.ui-sortable-helper)", // Reject clones generated by sortable
      drop: function (e, ui) {
        var new_item = ui.draggable.text()
        var rid = $("#dropzone-rtn").data("rid")
        $.ajax({
            method: "POST",
            contentType: 'application/json;charset=UTF-8',
            url: "/update-sys-tag",
            data: JSON.stringify({
                'item': new_item,
                'rid': rid
            }),
            success: function (res) {
                console.log(res.response)
                location.reload();
            },
            error: function () {
                console.log('Error');
            }
        });
      }
    }).sortable({
      items: '.drop-item',
      sort: function() {
        // gets added unintentionally by droppable interacting with sortable
        // using connectWithSortable fixes this, but doesn't allow you to customize active/hoverClass options
        $(this).removeClass( "active" );
      }
    });

    $('#dropzone-cmd1').droppable({
      activeClass: 'active',
      hoverClass: 'hover',
      accept: ":not(.ui-sortable-helper)", // Reject clones generated by sortable
      drop: function (e, ui) {
        var new_item = ui.draggable.text()
        var rid = $("#dropzone-rtn").data("rid")
        $.ajax({
            method: "POST",
            contentType: 'application/json;charset=UTF-8',
            url: "/update-cmd1-tag",
            data: JSON.stringify({
                'item': new_item,
                'rid': rid
            }),
            success: function (res) {
                console.log(res.response)
                location.reload();
            },
            error: function () {
                console.log('Error');
            }
        });
      }
    }).sortable({
      items: '.drop-item',
      sort: function() {
        // gets added unintentionally by droppable interacting with sortable
        // using connectWithSortable fixes this, but doesn't allow you to customize active/hoverClass options
        $(this).removeClass( "active" );
      }
    });

    $('#dropzone-cmd2').droppable({
      activeClass: 'active',
      hoverClass: 'hover',
      accept: ":not(.ui-sortable-helper)", // Reject clones generated by sortable
      drop: function (e, ui) {
        var new_item = ui.draggable.text()
        var rid = $("#dropzone-rtn").data("rid")
        $.ajax({
            method: "POST",
            contentType: 'application/json;charset=UTF-8',
            url: "/update-cmd2-tag",
            data: JSON.stringify({
                'item': new_item,
                'rid': rid
            }),
            success: function (res) {
                console.log(res.response)
                location.reload();
            },
            error: function () {
                console.log('Error');
            }
        });
      }
    }).sortable({
      items: '.drop-item',
      sort: function() {
        // gets added unintentionally by droppable interacting with sortable
        // using connectWithSortable fixes this, but doesn't allow you to customize active/hoverClass options
        $(this).removeClass( "active" );
      }
    });
});