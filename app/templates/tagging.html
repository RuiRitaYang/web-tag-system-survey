{% extends "base.html" %}
{% block title %}Index{% endblock %}

{% block content %}
<div class="container">
  Some brief definition (for user's convenience)
<!--  TODO -->
</div>
<br><br><br>

<div class="container">
<!--    Drag and drop reference: https://codepen.io/ovvn/pen/Nqxzjg -->
  <div class="row">
    <div class="col">
      <!-- ---------------------------  -->
      <!--   Tagging at routine level   -->
      <!-- ---------------------------  -->
      <div class="row">
        <div class="col-md-auto">
          <b>Routine {{ idx }}</b>: {{ rtn_info["rtn_name"] }}
        </div>
        <div class="dropzone col" id="dropzone-rtn" data-rid="{{ rid }}">
          {% if rtn_sys_tag %}
            {{ rtn_sys_tag }}
            <button type="button" class="btn btn-default btn-xs remove"
                    onclick="window.location.href=
                    '{{ url_for('remove_rtn_sys_tag', rid=rid, idx=idx) }}';">
              X
              <!-- <span class="glyphicon glyphicon-trash"></span> -->
            </button>
          {% endif %}

          {% for cus_tag in rtn_cus_tags %}
            {{ cus_tag }}
          {% endfor %}
        </div>
      </div>
      <!-- ----------------------------- -->
      <!-- System tag for Command 1 only -->
      <!-- ----------------------------- -->
      <div class="row">
        <div class="col-md-auto">
          <b>Command 1</b>: {{ rtn_info["cmd1"] }}
        </div>
        <div class="dropzone col" id="dropzone-cmd1">
          {% if cmd1_tag %}
            {{ cmd1_tag }}
            <button type="button" class="btn btn-default btn-xs remove"
                    onclick="window.location.href=
                    '{{ url_for('remove_cmd1_tag', rid=rid, idx=idx) }}';">
              X
            </button>
          {% endif %}
        </div>
      </div>
      <!-- ----------------------------- -->
      <!-- System tag for Command 2 only -->
      <!-- ----------------------------- -->
      <div class="row">
        <div class="col-md-auto">
          <b>Command 2</b>: {{ rtn_info["cmd2"] }}
        </div>
        <div class="dropzone col" id="dropzone-cmd2">
          {% if cmd2_tag %}
            {{ cmd2_tag }}
            <button type="button" class="btn btn-default btn-xs remove"
                    onclick="window.location.href=
                    '{{ url_for('remove_cmd2_tag', rid=rid, idx=idx) }}';">
              X
            </button>
          {% endif %}
        </div>
      </div>
      <!--   Browsing among different routines   -->
      <form action="{{ url_for('tag', idx=idx )}}" method="POST">
        {% if idx > 1 %}
          <input class="btn btn-outline-secondary"
                 type="submit" name="tag-page-action" value="Previous">
        {% endif %}
        {% if idx < total_rtn %}
          <input class="btn btn-outline-secondary"
                 type="submit" name="tag-page-action" value="Next">
        {% else %}
          <input class="btn btn-outline-primary"
                 type="submit" name="tag-page-action" value="Finish">
        {% endif %}
      </form>
    </div>
    <div class="col-md-auto">
      <div class="right-panel">
        <h4> System tags</h4>
        <div class="modules" id="modules">
          <p class="drag"><a class="btn btn-default">Uninterruptible</a></p>
          <p class="drag"><a class="btn btn-default">Pausable</a></p>
        </div>
        <h4> Self-defined tags </h4>
        <div class="modules" id="modules-ct">
          <form>
            <div class="modules" id="modules">
              {% for all_cus_t in all_cus_tag%}
                <p class="drag"><a class="btn btn-default">{{ all_cus_t.name }}</a></p>
              {% endfor %}
<!--     
              {% for cus_tag in rtn_cus_tags %}
                {{ cus_tag }}
              {% endfor %} --> 
            </div>
            <br>
            <label for="tagname">Tag name:</label><br>
            <input type="text" id="tagname" name="tagname"><br>
            <label for="priority">Priority (Optional):</label><br>
            <input type="text" id="priority" name="priority">
            <br><br>
            <button onclick="addNewTag(document.getElementById('tagname').value, document.getElementById('priority').value)">Add new Tag</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  <br>
</div>

<script>
  function addNewTag(name, priority){
    console.log(name)
    console.log(priority)
  }
</script>


{% endblock %}